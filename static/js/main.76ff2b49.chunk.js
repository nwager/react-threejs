(this["webpackJsonpreact-threejs"]=this["webpackJsonpreact-threejs"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(8),s=n.n(a),i=n(15),r=n.n(i),o=(n(21),n(0)),c=n(1),l=n(2),u=n(3),d=(n(22),n(23),n(7)),h=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).puns=["Hope this website finds you whale.","Whale hello there.","Welcome, it's been a whale.","Long time no sea.","This is a fun whalepaper.","There's no real porpoise to this page.","Isn't this fin.","Whale, whale, whale, look who's here.","Taylor won gold in the 2021 Cetacea-lympics Gymnastics competition.","No pun here; you've been spared."],a.state={subtitle:a.puns[Math.floor(Math.random()*a.puns.length)]},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"Header",children:[Object(d.jsx)("h1",{children:"React + ThreeJS"}),Object(d.jsx)("p",{className:"subtitle",children:this.state.subtitle})]})}}]),n}(a.Component),p=(n(25),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"Score",children:Object(d.jsxs)("p",{className:"scoreText",children:["Score: ",this.props.score]})})}}]),n}(a.Component)),j=n(11),b=n(4),m=n(16),f=(n(26),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).mount=null,e.scene=new b.db,e.addLights=function(){var t=new b.q(16777215,4473924);t.position.set(0,300,0),t.intensity=2,e.scene.add(t);var n=new b.l(12779775);n.position.set(75,300,-75),n.intensity=2,e.scene.add(n);var a=new b.a(16777215);a.intensity=3,e.scene.add(a)},e.createFadeTorus=function(t){var n=t.clone();return n.material=new b.L({color:16777215}),n.material.transparent=!0,e.scene.add(n),n},e.addStar=function(t){for(var n=new b.hb(.4,4,2),a=new b.N({color:Math.random()<.5?4385765:13645787,transparent:!0,opacity:.9}),s=new b.K(n,a),i=Array(3).fill(0).map((function(){return b.I.randFloatSpread(200)})),r=Object(j.a)(i,3),o=r[0],c=r[1],l=r[2];new b.pb(o,c,l).distanceTo(t.position)<10;){var u=Array(3).fill(0).map((function(){return b.I.randFloatSpread(200)})),d=Object(j.a)(u,3);o=d[0],c=d[1],l=d[2]}var h=Array(3).fill(0).map((function(){return b.I.randFloatSpread(Math.PI)})),p=Object(j.a)(h,3),m=p[0],f=p[1],v=p[2];return s.position.set(o,c,l),s.rotation.set(m,f,v),e.scene.add(s),s},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new b.G;t.onLoad=this.props.onLoad,t.onProgress=function(t,n,a){e.props.onProgress(n/a)};var n=new b.rb({alpha:!0});n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(window.devicePixelRatio),this.mount&&this.mount.appendChild(n.domElement);var a=new b.V(75,window.innerWidth/window.innerHeight,.1,1e3);window.onresize=function(){n.setSize(window.innerWidth,window.innerHeight),a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix()},a.position.x=-this.props.cameraDist,a.position.z=this.props.cameraDist,a.position.y=this.props.cameraDist/2,a.lookAt(0,0,0),n.render(this.scene,a);var s,i,r=new b.j;this.addLights(),new m.a(t).load(this.pubURL("/models/bluewhale_textured.glb"),(function(t){(s=t.scene).position.y=e.props.radius,e.scene.add(s),(i=new b.c(s)).clipAction(t.animations[7]).play()}),void 0,(function(e){console.log("That's a whale of an error!"),console.log(e)}));var o=new b.lb(8,1,16,100),c=new b.L({color:16763694}),l=new b.K(o,c);this.setTorusCircle(l,360*Math.random()),this.scene.add(l);var u=[],d=Array(250).fill(null).map((function(){return e.addStar(a)}));!function t(){requestAnimationFrame(t),i&&i.update(r.getDelta());var o=r.getElapsedTime();if(s){e.moveWhale(s,o);s.position.distanceTo(l.position)<1&&(u.push(e.createFadeTorus(l)),e.setTorusCircle(l,360*Math.random()),e.props.onScore()),e.fadeTori(u);var c=(new b.pb).copy(s.position);a.lookAt(c.normalize().multiplyScalar(2.3))}e.starsWave(d,o),n.render(e.scene,a)}()}},{key:"moveWhale",value:function(e,t){var n=Math.PI/2,a=this.props.radius*Math.sin(-this.props.omega*t+n),s=this.props.radius*Math.cos(-this.props.omega*t+n),i=2*Math.PI/this.props.omega,r=t%i/i;e.position.set(0,a,s),e.rotation.x=r*Math.PI*2}},{key:"setTorusCircle",value:function(e,t){var n=this.props.radius*Math.cos(b.I.degToRad(t)),a=this.props.radius*Math.sin(b.I.degToRad(t)),s=b.I.degToRad(90-t);e.position.set(0,a,n),e.rotation.set(s,0,0)}},{key:"fadeTori",value:function(e){var t=this;e.forEach((function(n,a){n.material.opacity<=0&&(t.scene.remove(n),e.splice(a,1)),n.material.opacity-=.1,n.scale.addScalar(.06)}))}},{key:"starsWave",value:function(e,t){e.forEach((function(e,n){e.rotateOnAxis(new b.pb(n,n*n,n*n).normalize(),.02),e.position.y+=.01*Math.sin(.5*(t+e.position.x/10))}))}},{key:"cubeSin",value:function(e){var t=Math.PI;return e%=2*t,-(4/Math.PI*e+-4/(Math.PI*t)*e*(e<0?-e:e))}},{key:"pubURL",value:function(e){return"/react-threejs"+e}},{key:"render",value:function(){var e=this;return Object(d.jsx)("div",{className:"Renderer",ref:function(t){return e.mount=t}})}}]),n}(a.Component)),v=(n(28),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return this.props.opacity>0?Object(d.jsxs)("div",{className:"LoadingScreen",style:{opacity:this.props.opacity},children:[Object(d.jsx)("h1",{className:"loadingText",children:"Loading"}),Object(d.jsx)("div",{className:"progressParent",children:Object(d.jsx)("div",{className:"progressBar",style:{width:"".concat(100*this.props.progress,"%")}})})]}):null}}]),n}(a.Component)),g=(n(29),n.p+"static/media/react.de556238.svg"),O=n.p+"static/media/github.342298b7.svg",y=n.p+"static/media/threejs.b26a3dcc.svg",w=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"MenuBar",children:[Object(d.jsx)("div",{className:"activate-button"}),Object(d.jsxs)("ul",{className:"Links",children:[Object(d.jsx)("li",{className:"bar-item",children:Object(d.jsx)("a",{href:"https://reactjs.org/",target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{src:g,alt:"react logo"})})}),Object(d.jsx)("li",{className:"bar-item",children:Object(d.jsx)("a",{href:"https://threejs.org/",target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{src:y,alt:"threejs logo"})})}),Object(d.jsx)("li",{className:"bar-item",children:Object(d.jsx)("a",{href:"https://github.com/nwager/react-threejs",target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{src:O,alt:"github logo"})})})]})]})}}]),n}(a.Component),x=(n(30),n.p+"static/media/email.b4731eb9.svg"),S=n.p+"static/media/send-mail.7c5122fb.svg",N=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).toggleHidden=function(){a.setState((function(e){return{hidden:!e.hidden}}))},a.updateSubject=function(e){a.setState({subject:e.currentTarget.value})},a.updateBody=function(e){a.setState({body:e.currentTarget.value})},a.sendEmail=function(){document.location.href="mailto:noahwager+reactthreejs@gmail.com?subject="+encodeURIComponent(a.state.subject)+"&body="+encodeURIComponent(a.state.body)},a.state={hidden:!0,subject:"",body:""},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"MailWidget ".concat(this.state.hidden?"down":""),children:[Object(d.jsx)("button",{className:"mail-button",onClick:this.toggleHidden,children:Object(d.jsx)("img",{src:x,alt:"email contact form"})}),Object(d.jsx)("div",{className:"mail-container",children:Object(d.jsxs)("div",{className:"mail-text-container",children:[Object(d.jsx)("span",{className:"mail-label",children:"Subject"}),Object(d.jsx)("input",{type:"text",className:"mail-input mail-subject",value:this.state.subject,onChange:this.updateSubject}),Object(d.jsx)("span",{className:"mail-label",children:"Body"}),Object(d.jsx)("textarea",{className:"mail-input mail-body",value:this.state.body,onChange:this.updateBody}),Object(d.jsx)("button",{className:"send-button",onClick:this.sendEmail,children:Object(d.jsx)("img",{src:S,alt:"send email"})})]})})]})}}]),n}(a.Component),k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).incrementScore=function(){a.setState((function(e){return{score:e.score+1}}))},a.onProgress=function(e){a.setState({progress:e})},a.onLoad=function(){setInterval((function(){a.state.opacity<=0&&clearInterval();a.setState((function(e){return{opacity:Math.max(e.opacity-.025,0)}}))}),20)},a.state={score:0,opacity:1,progress:0,radius:50,omega:.3,cameraDist:70},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(v,{opacity:this.state.opacity,progress:this.state.progress}),Object(d.jsx)(f,{cameraDist:this.state.cameraDist,radius:this.state.radius,omega:this.state.omega,onScore:this.incrementScore,onProgress:this.onProgress,onLoad:this.onLoad}),Object(d.jsx)(h,{}),Object(d.jsx)(w,{}),Object(d.jsx)(p,{score:this.state.score}),Object(d.jsx)(N,{}),Object(d.jsx)("div",{className:"scrollSpace",style:{height:"200vh"}})]})}}]),n}(a.Component),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))};r.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(k,{})}),document.getElementById("root")),T()}},[[31,1,2]]]);
//# sourceMappingURL=main.76ff2b49.chunk.js.map