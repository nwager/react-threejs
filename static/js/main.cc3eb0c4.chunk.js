(this["webpackJsonpreact-threejs"]=this["webpackJsonpreact-threejs"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(9),o=n.n(a),s=n(15),r=n.n(s),i=(n(21),n(0)),c=n(1),l=n(2),h=n(3),p=n.p+"static/media/logo.6ce24c58.svg",u=(n(22),n(23),n(7)),d=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).puns=["Hope this website finds you whale.","Whale hello there.","Welcome, it's been a whale.","Long time no sea.","This is a fun whalepaper.","There's no real porpoise to this page.","Isn't this fin.","Whale, whale, whale, look who's here.","Taylor won gold in the 2021 Cetacea-lympics Gymnastics competition.","No pun here, you've been spared."],a.subtitle=void 0,a.subtitle=a.puns[Math.floor(Math.random()*a.puns.length)],a}return Object(c.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"Title",children:[Object(u.jsx)("h1",{children:"React + ThreeJS"}),Object(u.jsx)("p",{className:"subtitle",children:this.subtitle})]})}}]),n}(a.Component),m=n(11),f=n(4),b=n(16),j=(n(25),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).mount=null,e.scene=new f.db,e.addStar=function(t){for(var n=new f.hb(.4,4,2),a=new f.N({color:Math.random()<.5?4385765:13645787,transparent:!0,opacity:.9}),o=new f.K(n,a),s=Array(3).fill(0).map((function(){return f.I.randFloatSpread(200)})),r=Object(m.a)(s,3),i=r[0],c=r[1],l=r[2];new f.pb(i,c,l).distanceTo(t.position)<10;){var h=Array(3).fill(0).map((function(){return f.I.randFloatSpread(200)})),p=Object(m.a)(h,3);i=p[0],c=p[1],l=p[2]}var u=Array(3).fill(0).map((function(){return f.I.randFloatSpread(Math.PI)})),d=Object(m.a)(u,3),b=d[0],j=d[1],v=d[2];return o.position.set(i,c,l),o.rotation.set(b,j,v),e.scene.add(o),o},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new f.G;t.onLoad=this.props.onLoad,t.onProgress=function(t,n,a){e.props.onProgress(n/a)};var n=new f.rb({alpha:!0});n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(window.devicePixelRatio),this.mount&&this.mount.appendChild(n.domElement);var a=new f.V(75,window.innerWidth/window.innerHeight,.1,1e3);a.position.x=-this.props.cameraDist,a.position.z=this.props.cameraDist,a.position.y=this.props.cameraDist/2,a.lookAt(0,0,0),n.render(this.scene,a);var o,s,r=new f.j;this.addLights(),new b.a(t).load(this.pubURL("/models/bluewhale_textured.glb"),(function(t){(o=t.scene).position.y=e.props.radius,e.scene.add(o),(s=new f.c(o)).clipAction(t.animations[7]).play()}),void 0,(function(e){console.log("That's a whale of an error!"),console.log(e)}));var i=new f.lb(8,1,16,100),c=new f.L({color:16763694}),l=new f.K(i,c);this.setTorusCircle(l,360*Math.random()),this.scene.add(l);var h=[],p=Array(250).fill(null).map((function(){return e.addStar(a)}));!function t(){requestAnimationFrame(t),s&&s.update(r.getDelta());var i=r.getElapsedTime();if(o){e.moveWhale(o,i);o.position.distanceTo(l.position)<1&&(h.push(e.createFadeTorus(l)),e.setTorusCircle(l,360*Math.random()),e.props.onScore()),e.fadeTori(h);var c=(new f.pb).copy(o.position);a.lookAt(c.normalize().multiplyScalar(2.3))}p.forEach((function(e,t){e.rotateOnAxis(new f.pb(t,t*t,t*t).normalize(),.02),e.position.y+=.01*Math.sin(.5*(i+e.position.x/10))})),n.render(e.scene,a)}()}},{key:"addLights",value:function(){var e=new f.q(16777215,4473924);e.position.set(0,300,0),e.intensity=2,this.scene.add(e);var t=new f.l(12779775);t.position.set(75,300,-75),t.intensity=2,this.scene.add(t);var n=new f.a(16777215);n.intensity=3,this.scene.add(n)}},{key:"moveWhale",value:function(e,t){var n=Math.PI/2,a=this.props.radius*Math.sin(-this.props.omega*t+n),o=this.props.radius*Math.cos(-this.props.omega*t+n),s=2*Math.PI/this.props.omega,r=t%s/s;e.position.set(0,a,o),e.rotation.x=r*Math.PI*2}},{key:"setTorusCircle",value:function(e,t){var n=this.props.radius*Math.cos(f.I.degToRad(t)),a=this.props.radius*Math.sin(f.I.degToRad(t)),o=f.I.degToRad(90-t);e.position.set(0,a,n),e.rotation.set(o,0,0)}},{key:"createFadeTorus",value:function(e){var t=e.clone();return t.material=new f.L({color:16777215}),t.material.transparent=!0,this.scene.add(t),t}},{key:"fadeTori",value:function(e){var t=this;e.forEach((function(n,a){n.material.opacity<=0&&(t.scene.remove(n),e.splice(a,1)),n.material.opacity-=.1,n.scale.addScalar(.06)}))}},{key:"pubURL",value:function(e){return"/react-threejs"+e}},{key:"render",value:function(){var e=this;return Object(u.jsx)("div",{className:"Renderer",ref:function(t){return e.mount=t}})}}]),n}(a.Component)),v=(n(27),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return this.props.opacity>0?Object(u.jsxs)("div",{className:"LoadingScreen",style:{opacity:this.props.opacity},children:[Object(u.jsx)("h1",{className:"loadingText",children:"Loading"}),Object(u.jsx)("div",{className:"progressParent",children:Object(u.jsx)("div",{className:"progressBar",style:{width:"".concat(100*this.props.progress,"%")}})})]}):null}}]),n}(a.Component)),g=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).incrementScore=function(){a.setState((function(e){return{score:e.score+1}}))},a.onProgress=function(e){a.setState({progress:e})},a.onLoad=function(){setInterval((function(){a.state.opacity<=0&&clearInterval();a.setState((function(e){return{opacity:Math.max(e.opacity-.025,0)}}))}),20)},a.state={score:0,opacity:1,progress:0,radius:50,omega:.3,cameraDist:70},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(v,{opacity:this.state.opacity,progress:this.state.progress}),Object(u.jsx)(j,{cameraDist:this.state.cameraDist,radius:this.state.radius,omega:this.state.omega,onScore:this.incrementScore,onProgress:this.onProgress,onLoad:this.onLoad}),Object(u.jsx)(d,{}),Object(u.jsxs)("header",{className:"App-header",children:[Object(u.jsx)("img",{src:p,className:"App-logo",alt:"logo"}),Object(u.jsx)("p",{className:"scoreText",children:this.state.score}),Object(u.jsx)("a",{href:"https://github.com/nwager/react-threejs",target:"_blank",rel:"noreferrer",children:"Github"})]}),Object(u.jsx)("div",{className:"scrollSpace",style:{height:"100vh"}})]})}}]),n}(a.Component),y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),s(e),r(e)}))};r.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(g,{})}),document.getElementById("root")),y()}},[[28,1,2]]]);
//# sourceMappingURL=main.cc3eb0c4.chunk.js.map