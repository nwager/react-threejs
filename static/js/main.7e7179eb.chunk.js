(this["webpackJsonpreact-threejs"]=this["webpackJsonpreact-threejs"]||[]).push([[0],{22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n.n(a),i=n(15),o=n.n(i),s=(n(22),n(0)),c=n(1),l=n(2),h=n(3),u=n.p+"static/media/logo.6ce24c58.svg",p=(n(23),n(24),n(7)),d=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"Title",children:[Object(p.jsx)("h1",{children:this.props.title}),Object(p.jsx)("p",{children:this.props.subtitle})]})}}]),n}(a.Component),m=n(11),b=n(4),w=n(16),f=n(17),j=(n(26),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).orbitControls=!1,e.epsilon=1,e.mount=null,e.whaleMesh=null,e.mixer=null,e.numStars=200,e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=new b.vb({alpha:!0});t.setSize(window.innerWidth,window.innerHeight),t.setPixelRatio(window.devicePixelRatio),this.mount&&this.mount.appendChild(t.domElement);var n=new b.fb,a=new b.W(75,window.innerWidth/window.innerHeight,.1,1e3);a.position.x=-this.props.cameraDist,a.position.z=this.props.cameraDist,a.position.y=this.props.cameraDist/2,a.lookAt(0,0,0);var r=new b.j;t.render(n,a),this.addLights(n);var i=new b.pb(8,1,16,100),o=new b.M({color:16763694}),s=new b.L(i,o);s.position.y=this.props.radius,n.add(s);var c=Array(this.numStars).fill(null).map((function(){return e.addStar(n)}));(new w.a).load(this.pubURL("/models/bluewhale_textured.glb"),(function(t){e.whaleMesh=t.scene,e.whaleMesh.position.y=e.props.radius,e.mixer=new b.c(e.whaleMesh),e.mixer.clipAction(t.animations[7]).play(),n.add(e.whaleMesh)}),void 0,(function(e){console.log("That's a whale of an error!"),console.log(e)}));var l=this.orbitControls?new f.a(a,t.domElement):null;!function i(){requestAnimationFrame(i),e.mixer&&e.mixer.update(r.getDelta());var o=r.getElapsedTime();if(e.whaleMesh){var h=Math.PI/2,u=e.props.radius*Math.sin(-e.props.omega*o+h),p=e.props.radius*Math.cos(-e.props.omega*o+h);e.whaleMesh.position.set(0,u,p);var d=2*Math.PI/e.props.omega,m=o%d/d;if(e.whaleMesh.rotation.x=m*Math.PI*2,e.whaleMesh.position.distanceTo(s.position)<e.epsilon){var w=e.torusCircleState(360*Math.random());s.position.set(w[0].x,w[0].y,w[0].z),s.rotation.set(w[1].x,w[1].y,w[1].z),e.props.onScore()}var f=(new b.tb).copy(e.whaleMesh.position);a.lookAt(f.normalize().multiplyScalar(2))}c.forEach((function(t,n){var a=new b.tb(n,n*n,n*n);t.rotateOnAxis(a.normalize(),.02),t.position.y+=.04*Math.sin(.5*o+2*t.position.x*Math.PI/e.numStars)})),t.render(n,a),l&&l.update()}()}},{key:"addLights",value:function(e){var t=new b.r(16777215,4473924);t.position.set(0,300,0),t.intensity=2,e.add(t);var n=new b.l(12779775);n.position.set(75,300,-75),n.intensity=2,e.add(n);var a=new b.a(16777215);a.intensity=3,e.add(a)}},{key:"pubURL",value:function(e){return"/react-threejs"+e}},{key:"degToRad",value:function(e){return e*(Math.PI/180)}},{key:"radToDeg",value:function(e){return e*(180/Math.PI)}},{key:"torusCircleState",value:function(e){var t=this.props.radius*Math.cos(this.degToRad(e)),n=this.props.radius*Math.sin(this.degToRad(e)),a=this.degToRad(90-e);return[new b.tb(0,n,t),new b.tb(a,0,0)]}},{key:"addStar",value:function(e){var t=new b.jb(.4,4,2),n=new b.O({color:Math.random()<.5?4385765:13645787,transparent:!0,opacity:.9}),a=new b.L(t,n),r=Array(3).fill(0).map((function(){return b.J.randFloatSpread(150)})),i=Object(m.a)(r,3),o=i[0],s=i[1],c=i[2],l=Array(3).fill(0).map((function(){return b.J.randFloatSpread(Math.PI)})),h=Object(m.a)(l,3),u=h[0],p=h[1],d=h[2];return a.position.set(o,s,c),a.rotation.set(u,p,d),e.add(a),a}},{key:"render",value:function(){var e=this;return Object(p.jsx)("div",{className:"Renderer",ref:function(t){return e.mount=t}})}}]),n}(a.Component)),v=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).incrementScore=function(){a.setState({score:a.state.score+1})},a.state={score:0},a}return Object(c.a)(n,[{key:"render",value:function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(j,{cameraDist:50,radius:30,omega:.3,onScore:this.incrementScore}),Object(p.jsx)(d,{title:"React + ThreeJS",subtitle:"Hope this website finds you whale."}),Object(p.jsxs)("header",{className:"App-header",children:[Object(p.jsx)("img",{src:u,className:"App-logo",alt:"logo"}),Object(p.jsxs)("p",{children:["Score: ",this.state.score]}),Object(p.jsx)("a",{href:"https://github.com/nwager/react-threejs",target:"_blank",rel:"noreferrer",children:"Github Repo"})]})]})}}]),n}(a.Component),g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};o.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root")),g()}},[[28,1,2]]]);
//# sourceMappingURL=main.7e7179eb.chunk.js.map